---
import { getCollection } from "astro:content";
import BaseLayout from "@/layouts/BaseLayout.astro";
import { ProjectsFall } from "@/components/projects/ProjectsFall";
import { themes } from "@/lib/themes";
import { ProfileCardModal, profileData } from "@/components/data/profile";

const allProjects = await getCollection("projects");
// 按 pin 和日期排序
const sortedProjects = allProjects.sort((a, b) => {
  if (a.data.pin && !b.data.pin) return -1;
  if (!a.data.pin && b.data.pin) return 1;
  return b.data.startDate.getTime() - a.data.startDate.getTime();
});
---

<BaseLayout
  title="呂亮進・一位多領域背景的產品創造者"
  description="關於呂亮進 - AI 工程師、產品設計師、全端開發者"
  ogImage="/assets/MetaTagCover.png"
  headerType="main"
>
  <div class="min-h-screen bg-gradient-to-b from-gray-50 to-transparent pt-20">
    <!-- Projects Section -->
    <section class="container mx-auto px-4 py-12">
      <div class="max-w-6xl mx-auto">
        <ProjectsFall projects={sortedProjects} themes={themes} client:load />
      </div>
    </section>
  </div>
  <button
    id="profile-modal-btn"
    class="floatbtn fixed bottom-28 right-6 size-16 md:bottom-30 md:right-8 rounded-full bg-[var(--theme-primary)] text-background flex items-center justify-center shadow-[0_4px_12px_rgba(0,0,0,0.15)] opacity-0 invisible transition-all duration-300 ease-in-out z-40 cursor-pointer hover:bg-[var(--theme-secondary)] hover:-translate-y-1 hover:shadow-[0_6px_16px_rgba(0,0,0,0.2)] active:-translate-y-0.5 lg:hidden"
    title="通知我"
  >
    <img
      src="/assets/imgs/index/myHead.webp"
      alt={`${profileData.name}的頭像`}
      class="size-16 rounded-full overflow-hidden"
    />
  </button>

  <ProfileCardModal client:load />
</BaseLayout>
